# Servlet
## 一 创建Servlet的方法

#### 1. 实现Servlet接口

在service()方法中编写处理方法

#### 2. 继承HttpServlet类

重写doGet() doPost方法
doGet()中处理用户的get请求
doPost()中处理用户的post请求

## 二 配置Servlet的方法

#### 1. 通过注解来配置

```
@WebServlet("/hello2")
```

#### 2. 通过在web.xml中添加配置信息

```
<servlet>
	<!-- servlet的名称 -->
	<servlet-name>DemoServlet</servlet-name>
	<!-- servlet的具体实现类 -->
	<servlet-class>cn.igeek.web.DemoServlet</servlet-class>
</servlet>

<servlet-mapping>
	<!-- servlet的名称 -->
	<servlet-name>DemoServlet</servlet-name>
	<!-- 访问这个servlet程序的请求路径 -->
	<url-pattern>/DemoServlet</url-pattern>
</servlet-mapping>

```

如:

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://xmlns.jcp.org/xml/ns/javaee" xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd" id="WebApp_ID" version="3.1">
  <display-name>02Servlet</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>
  <servlet>
    <servlet-name>HelloServlet3</servlet-name>
    <servlet-class>com.igeek._1Servlet.HelloServlet3</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>HelloServlet3</servlet-name>
    <url-pattern>/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</url-pattern>
  </servlet-mapping>
</web-app>
```

## 常见问题

```
严重: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/02Servlet]]
	at java.util.concurrent.FutureTask.report(FutureTask.java:122)
	at java.util.concurrent.FutureTask.get(FutureTask.java:192)
	at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:939)
	at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:872)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1419)
	at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1409)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at java.lang.Thread.run(Thread.java:745)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/02Servlet]]
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:167)
	... 6 more
Caused by: java.lang.IllegalArgumentException: The servlets named [com.igeek._1Servlet.HelloServlet] and [com.igeek._1Servlet.HelloServlet6] are both mapped to the url-pattern [/hello1] which is not permitted
	at org.apache.tomcat.util.descriptor.web.WebXml.addServletMappingDecoded(WebXml.java:325)
	at org.apache.tomcat.util.descriptor.web.WebXml.addServletMapping(WebXml.java:318)
	at org.apache.catalina.startup.ContextConfig.processAnnotationWebServlet(ContextConfig.java:2389)
	at org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:2066)
	at org.apache.catalina.startup.ContextConfig.processAnnotationsWebResource(ContextConfig.java:1952)
	at org.apache.catalina.startup.ContextConfig.processAnnotationsWebResource(ContextConfig.java:1946)
	at org.apache.catalina.startup.ContextConfig.processAnnotationsWebResource(ContextConfig.java:1946)
	at org.apache.catalina.startup.ContextConfig.processAnnotationsWebResource(ContextConfig.java:1946)
	at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1153)
	at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:775)
	at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:299)
	at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:94)
	at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5105)
	at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
	... 6 more
```

出错的时候,先找到第一个异常,看其原因异常

#### 1. 重复的映射地址

```
Caused by: java.lang.IllegalArgumentException: The servlets named [com.igeek._1Servlet.HelloServlet] and [com.igeek._1Servlet.HelloServlet6] are both mapped to the url-pattern [/hello1] which is not permitted

```

解决方式,就是讲其中一个映射地址改成其他的

#### 2. 映射地址少写了/ 

```
@WebServlet("hello6") 错了 应该是 /hello6
```

```
Caused by: java.lang.IllegalArgumentException: Invalid <url-pattern> [hello6] in servlet mapping
```

# Request和Response
## Ruequest 请求对象
## Reponse	响应对象

# 乱码处理
```
响应用户信息设置为utf-8
resp.setContentType("text/html;charset=utf-8");

下面的代码如果不出乱码则不需要添加

如果get请求用户提交参数为乱码时的处理
String name = new String(req.getParameter("userName").getBytes("ISO-8859-1"),"UTF-8");

如果post请求用户提交的参数为乱码时处理
req.setCharacterEncoding("UTF-8");
```
